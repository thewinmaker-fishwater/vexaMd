# SP MD Viewer - 개발 문서

## 프로젝트 개요

**SP MD Viewer**는 Tauri 2.x + Vanilla JavaScript로 개발된 초경량 마크다운 뷰어입니다.

### 주요 특징
- 1초 미만의 빠른 렌더링 속도
- 1.1MB 크기의 초경량 설치 파일
- 다양한 컬러 테마 (6종) + 커스텀 테마 저장
- 다크/라이트 모드 지원
- 탭 기능으로 여러 파일 동시 열기
- 최근 파일 목록 관리
- 확대/축소 및 뷰 모드 (한 페이지/여러 페이지)
- 프레젠테이션 모드 (F5)
- 다국어 지원 (한국어/영어/일본어)
- 인쇄 및 PDF 내보내기
- 코드 문법 하이라이트 (180+ 언어)
- TOC 사이드바 (목차)
- 파일 자동 리로드 (외부 편집 감지)
- GitHub 스타일 Alert Box
- **마크다운 편집 기능** (View/Edit/Split 모드)

---

## 기술 스택

| 구분 | 기술 | 버전 |
|------|------|------|
| 데스크톱 프레임워크 | Tauri | 2.x |
| 백엔드 | Rust | latest |
| 프론트엔드 빌드 | Vite | 5.4.x |
| 마크다운 파서 | marked.js | 12.x |
| 언어 | JavaScript (ES6+) | - |
| 스타일링 | CSS3 (Custom Properties) | - |

---

## 프로젝트 구조

```
mdView/
├── docs/                    # 문서
├── dist/                    # 빌드 결과물 (Vite)
├── public/                  # 정적 파일
│   └── logo.jpg            # Seven Peaks 로고
├── src/                     # 프론트엔드 소스
│   ├── main.js             # 메인 JavaScript
│   ├── style.css           # 스타일시트
│   └── i18n.js             # 다국어 번역
├── src-tauri/              # Tauri/Rust 소스
│   ├── src/
│   │   ├── main.rs         # Rust 메인 (Windows)
│   │   └── lib.rs          # Rust 라이브러리
│   ├── icons/              # 앱 아이콘
│   ├── capabilities/       # 권한 설정
│   ├── Cargo.toml          # Rust 의존성
│   └── tauri.conf.json     # Tauri 설정
├── index.html              # 메인 HTML
├── package.json            # npm 설정
└── vite.config.js          # Vite 설정
```

---

## 주요 기능 상세

### 1. 파일 관리
- **파일 열기**: `Ctrl+O` 또는 툴바 버튼
- **드래그 앤 드롭**: 파일을 창에 드래그하여 열기
- **CLI 인자**: `md-viewer.exe file.md`로 직접 열기
- **최근 파일**: 최대 10개 저장, 홈 화면에서 빠른 접근

### 2. 탭 시스템
- 여러 파일을 탭으로 관리
- 홈 탭은 항상 첫 번째에 위치 (닫기 불가)
- `Ctrl+W`: 현재 탭 닫기
- `Ctrl+Tab`: 다음 탭으로 이동

### 3. 테마 시스템
- **라이트/다크 모드**: `Ctrl+D`로 전환
- **컬러 테마 6종**:
  - 기본 (그레이)
  - 퍼플
  - 오션
  - 선셋
  - 포레스트
  - 로즈
- **테마 내보내기/가져오기**: JSON 파일로 저장/복원

### 4. 뷰 옵션
- **글씨 크기**: 작게 / 보통 / 크게 / 아주 크게
- **콘텐츠 너비**: 좁게(900px) / 보통(1200px) / 넓게(1600px) / 전체
- **뷰 모드**:
  - 한 페이지 보기: 전체 내용 연속 스크롤
  - 여러 페이지로 보기: `---` 기준 페이징
- **확대/축소**: 50% ~ 200% (Ctrl+마우스 휠 지원)

### 5. 프레젠테이션 모드
- `F5` 키로 시작
- 전체 화면 슬라이드쇼
- 키보드 네비게이션 (←/→/Space)
- `ESC`로 종료

#### 페이지 나누기
마크다운 파일에서 `---` (수평선)을 사용하여 슬라이드/페이지를 구분합니다:

```markdown
# 첫 번째 슬라이드

이것은 첫 번째 페이지 내용입니다.

---

# 두 번째 슬라이드

이것은 두 번째 페이지 내용입니다.

- 목록 항목 1
- 목록 항목 2

---

# 세 번째 슬라이드

마지막 페이지입니다.
```

**참고사항:**
- `---`는 3개 이상의 대시(`-`)로 작성 가능 (`----`, `-----` 등)
- `---` 앞뒤로 빈 줄이 있어야 페이지가 분리됨
- 프레젠테이션 모드뿐만 아니라 "여러 페이지로 보기" 모드에서도 동일하게 적용

### 6. 다국어 지원
- 한국어 / English 지원
- 툴바에서 언어 선택
- 모든 UI 요소 동적 번역

### 7. 인쇄 및 PDF 내보내기
- `Ctrl+P`로 인쇄
- 인쇄 시 UI 요소 자동 숨김
- 깔끔한 흑백 인쇄 스타일
- **PDF 내보내기**: 툴바의 PDF 버튼으로 PDF 파일 저장

### 8. 코드 문법 하이라이트
- **highlight.js** 기반 180+ 언어 지원
- GitHub 스타일 색상 적용
- 라이트/다크 테마 모두 지원

지원 언어 예시:
```markdown
```javascript
const hello = "world";
```

```python
print("Hello, World!")
```

```css
.container { display: flex; }
```
```

### 9. TOC 사이드바 (목차)
- `Ctrl+Shift+T` 또는 툴바 버튼으로 토글
- 마크다운 헤딩(h1~h6) 기반 자동 생성
- 클릭 시 해당 섹션으로 스크롤
- 현재 보는 섹션 하이라이트 (스크롤 스파이)

### 10. GitHub 스타일 Alert Box
5가지 타입의 알림 박스 지원:

```markdown
> [!NOTE]
> 참고 사항입니다.

> [!TIP]
> 유용한 팁입니다.

> [!IMPORTANT]
> 중요한 내용입니다.

> [!WARNING]
> 경고 메시지입니다.

> [!CAUTION]
> 주의가 필요한 내용입니다.
```

### 11. 파일 자동 리로드
- 열린 파일이 외부에서 수정되면 자동으로 새로고침
- 실시간 파일 감시 (Tauri watchImmediate API)

### 12. 마크다운 편집기
앱 내에서 직접 마크다운 파일을 편집할 수 있습니다.

#### 편집 모드
툴바에서 3가지 모드를 선택할 수 있습니다:

| 모드 | 아이콘 | 설명 |
|------|--------|------|
| **View** | 👁️ | 보기 전용 (기본값) |
| **Edit** | ✏️ | 편집 전용 - 에디터만 표시 |
| **Split** | ⫼ | 분할 모드 - 좌측 에디터, 우측 실시간 미리보기 |

#### 사용 방법
1. 마크다운 파일을 엽니다
2. 툴바에서 원하는 모드 버튼을 클릭합니다
3. 편집 후 `Ctrl+S`로 저장합니다

#### 주요 기능
- **실시간 미리보기**: Split 모드에서 편집 시 300ms 디바운스로 즉시 미리보기 반영
- **변경 감지**: 변경된 탭에 • 표시로 미저장 상태 알림
- **저장 확인**: 미저장 탭 닫기 시 확인 다이얼로그
- **탭별 모드 유지**: 각 탭의 편집 모드가 독립적으로 유지됨

---

## 키보드 단축키

| 단축키 | 기능 |
|--------|------|
| `Ctrl+O` | 파일 열기 |
| `Ctrl+S` | 저장 (편집 모드) |
| `Ctrl+D` | 다크/라이트 전환 |
| `Ctrl+P` | 인쇄 |
| `Ctrl+F` | 검색 |
| `Ctrl+W` | 현재 탭 닫기 |
| `Ctrl+Tab` | 다음 탭 |
| `Ctrl+Shift+T` | TOC 사이드바 토글 |
| `Ctrl++` | 확대 |
| `Ctrl+-` | 축소 |
| `Ctrl+0` | 원래 크기 |
| `F5` | 프레젠테이션 시작 |
| `←/→` | 페이지/슬라이드 이동 |
| `Space` | 다음 슬라이드 (프레젠테이션 모드) |
| `Esc` | 홈으로 / 프레젠테이션 종료 |

---

## 빌드 방법

### 사전 요구사항
- Node.js 18+
- Rust (rustup)
- Windows 10/11

### 개발 모드
```bash
npm install
npm run tauri dev
```

### 프로덕션 빌드
```bash
npm run tauri build
```

빌드 결과물:
- `src-tauri/target/release/md-viewer.exe` (실행 파일)
- `src-tauri/target/release/bundle/nsis/SP MD Viewer_1.0.0_x64-setup.exe` (설치 파일)

---

## 설정 저장

모든 설정은 `localStorage`에 저장됩니다:

| 키 | 설명 | 기본값 |
|----|------|--------|
| `theme` | 라이트/다크 | `light` |
| `colorTheme` | 컬러 테마 | `default` |
| `fontSize` | 글씨 크기 | `medium` |
| `fontFamily` | 글꼴 | `system` |
| `contentWidth` | 콘텐츠 너비 | `narrow` |
| `viewMode` | 뷰 모드 | `single` |
| `zoom` | 확대/축소 | `100` |
| `language` | 언어 | `ko` |
| `recentFiles` | 최근 파일 목록 | `[]` |

---

## 라이선스

Apache 2.0 License

---

## 개발사

**Seven Peaks Software**

---

## 문서 히스토리

| 날짜 | 변경 내용 |
|------|----------|
| 2026-01-24 | 마크다운 편집기 섹션 추가 (View/Edit/Split 모드) |
| 2026-01-24 | PDF 내보내기, 코드 하이라이트, 복사 버튼 추가 |
| 2026-01-22 | TOC 사이드바 섹션 추가 |
| 2026-01-09 | 파일 자동 리로드 섹션 추가 |
| 2025-12-26 | 초기 문서 작성 |

*마지막 업데이트: 2026-01-24*
