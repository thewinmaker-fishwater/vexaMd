# ChilBong MD Viewer - 개발 이력

## 2024-12-26 성능 최적화

### 초기 로딩 성능 개선
- **Tauri API 병렬 로드**: `Promise.all`을 사용하여 3개 모듈 동시 로드
  - 기존: 순차 로드 (약 55ms)
  - 개선: 병렬 로드 (약 32ms)
- **UI 우선 렌더링**: Tauri 초기화를 기다리지 않고 UI 먼저 표시
  - UI 초기화: ~1ms
  - Tauri 백그라운드 완료: ~32ms
- **비블로킹 초기화**: `initTauri().then()` 패턴으로 UI 블로킹 제거

### 성능 측정 코드 추가
- `[PERF]` 로그로 초기화 단계별 시간 측정 가능
- 기본 비활성화 (주석 처리), 필요시 활성화

### 개발자 도구
- Cargo.toml에 devtools feature 주석으로 안내
- 개발 시 F12 사용하려면 `features = ["tray-icon", "devtools"]`로 변경

---

## 이전 세션 작업 내용

### 검색 기능
- 문서 내 텍스트 검색 기능 구현
- 검색창 UI (탭 아래 콘텐츠 영역 상단)
- 실시간 하이라이트
- 이전/다음 결과 네비게이션
- Ctrl+F 단축키
- Esc로 검색창 닫기

### 테마 커스터마이저
- UI 에디터 탭: 색상, 글꼴 등 시각적 편집
- CSS 에디터 탭: 직접 CSS 편집

#### 편집 가능 섹션
1. **기본 색상**: 배경, 텍스트, 강조, 테두리
2. **글꼴**: 본문 글꼴, 줄 간격
3. **코드 블록**: 배경색, 텍스트 색상, 코드 글꼴
4. **인용문**: 배경색, 테두리 색상/두께
5. **테이블**: 헤더 배경/텍스트 색상, 테두리 반경
6. **제목**: H1/H2 색상, 그라데이션 옵션
7. **텍스트 마크**: 링크, 굵은글씨, 기울임, 하이라이트, 목록 마커
8. **툴바**: 툴바 배경 그라데이션, 탭바 배경

### 커스텀 테마 시스템
- 테마 콤보박스에 "커스텀" 옵션 추가
- 프리셋 테마 선택 시 해당 색상이 커스터마이저에 반영
- 커스터마이저에서 "적용" 시 커스텀 테마로 저장
- 다른 테마 선택 시 커스텀 스타일 일시 비활성화 (데이터 보존)
- "커스텀" 다시 선택 시 저장된 스타일 복원

### 테마 내보내기/가져오기
- JSON 형식으로 테마 내보내기
- 파일에서 테마 가져오기
- Tauri fs 권한 설정

### 버그 수정
- 테마 콤보박스 변경 시 색상 미적용 수정
- 커스텀→기본 변경 시 색상 미복원 수정
- 커스텀 모드에서 글씨 크기 변경 안됨 수정
- 테마 커스터마이저 취소 시 원래 상태 복원

---

## 테마 내보내기 형식

```json
{
  "version": "2.0",
  "app": "ChilBong MD Viewer",
  "exportedAt": "2024-12-22T...",
  "baseTheme": "light",
  "colorTheme": "custom",
  "customStyles": {
    "bg": "#ffffff",
    "text": "#1f2328",
    "accent": "#656d76",
    ...
  },
  "generatedCss": "/* ChilBong MD Viewer - Custom Theme */..."
}
```

---

## 향후 개선 가능 사항

1. 여러 커스텀 테마 저장 및 관리
2. 테마 프리셋 추가
3. 마크다운 편집 기능
4. 파일 시스템 감시 (자동 리로드)
5. 다국어 지원
